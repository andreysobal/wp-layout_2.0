"use strict";var keepBodyPosition=void 0,classToggle=function(e){var t=e.currentTarget;t.classList.toggle("open"),t.classList.contains("open")?showModalWindow(!0):showModalWindow(!1)};document.querySelector(".icon").addEventListener("click",classToggle),document.querySelector(".icon").addEventListener("touch",classToggle);var navLink=document.querySelectorAll(".menu-item > a");function goFromMenu(e){e.preventDefault();var t=e.currentTarget,r=t.getAttribute("href");if(console.log(t.parentNode.parentNode),t.parentNode.parentNode.classList.contains("open")&&(showModalWindow(!1),document.querySelector(".icon").classList.remove("open")),0==r.search("#")){var n=$(r).offset().top;setTimeout(function(){$("html, body").animate({scrollTop:n+10},1e3)},10)}else window.location.href=r}function showModalWindow(e){var t=document.querySelector(".nav__wrapper");e?(t.className="nav__wrapper open",keepBodyPosition=window.pageYOffset):(t.className="nav__wrapper",window.scrollTo(0,keepBodyPosition))}function _alert(e){setTimeout(function(){alert(e)},500)}function contains(e,t){for(var r=e.childNodes,n=r.length-1;0<=n;n--)if(t==r[n])return!0;return!1}Array.prototype.forEach.call(navLink,function(e,t,r){e.addEventListener("click",goFromMenu),e.addEventListener("touchstart",goFromMenu)}),$(document).ready(function(){var u=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i=/^\+[0-9]{3}\s*?-*?[0-9]{2}\s*?-*?[0-9]{3}\s*?-*?[0-9]{2}\s*?-*?[0-9]{2}$/;$(document).on("focusin",".rep-form textarea.textarea",function(){$(this).removeClass("error-field")}),$(".rep-form input.textarea").focusin(function(){$(this).removeClass("error-field")}),$(".rep-form").submit(function(e){var t="",r=e.currentTarget,n=r.querySelector(".rep-form .email"),o=r.querySelector(".rep-form .name"),a=r.querySelector(".rep-form .tel"),s=r.querySelector(".rep-form #message_text"),l=[];if(contains(r,s)&&(l.push(s),s.value.length<5&&(0<t.length&&(t+="\n"),t+="Поле с вопросом должно содержать минимум 5 символов.",s.classList.add("error-field"))),contains(r,a)&&(l.push(a),i.test(a.value)||(t+='Поле "Ваш номер" должно содержать номер телефона с кодом в формате " +***-**-******* ". ',a.classList.add("error-field"))),contains(r,n)&&(l.push(n),u.test(n.value)||(0<t.length&&(t+="\n"),t+='Поле "Ваш e-mail" должно содержать правильный адрес электронной почты. ',n.classList.add("error-field"))),contains(r,o)&&(l.push(o),o.value.length<5&&(0<t.length&&(t+="\n"),t+="Поле с именем должно содержать минимум 5 символов.",o.classList.add("error-field"))),!(0<t.length))return r.querySelector("h2").focus(),$(".ironCurtain").show(),$(".progressBar").show(),$(this).ajaxSubmit({forceSync:!0,uploadProgress:function(e,t,r,n){n<99?t?$("#progressStatus").html('Загружено <span id="pos">'+bytesToSize(t,1)+'</span>  из  <span id="total">'+bytesToSize(r,1)+"</span>"):$("#progressStatus").html("Загрузка"):setTimeout(function(){$("#progressStatus").html("Почти загружено.<br>Пожалуйста, подождите еще немного.")},5e3),$(".progressBar .bar").css("width",Math.abs(2.7*n)+"px")},dataType:"json",error:function(e,t,r){$(".progressBar #pos").html(""),$(".progressBar #total").html(""),$(".progressBar .bar").css("width","10px"),$(".ironCurtain").hide(),$(".progressBar").hide(),_alert("Проблемы при передаче сообщения. Попробуйте еще раз."),console.log(t),console.log(e.responseText),console.log(r)},success:function(e){$("#progressStatus").html("100%"),$(".progressBar .bar").css("width","100%"),setTimeout(function(){$(".ironCurtain").hide(),$(".progressBar").hide(),1!=e.sent||""==e?_alert("Пожалуйста, заполните все поля формы."):(_alert("Сообщение отправлено."),a&&(a.value=""),n&&(n.value=""),s&&(s.value=""),o&&(o.value=""))},500)}}),!1;l.forEach(function(e,t){e.blur()}),e.preventDefault?e.preventDefault():e.returnValue=!1,_alert(t)})}),$(function(){$.urlParam=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(window.location.search);if(null!=r||(""==window.document.referrer?null:new URL(window.document.referrer).hostname)!=window.location.hostname)return null==r?null:decodeURIComponent(r[1].replace(/\+/g," "));var n=t.exec(document.referrer);return null==n?null:decodeURIComponent(n[1].replace(/\+/g," "))},function(){null!=$.urlParam("utm_source")&&$("form").append('<input type="text" name="utm_source" value="'+$.urlParam("utm_source")+'" style="display:none;">'),null!=$.urlParam("utm_medium")&&$("form").append('<input type="text" name="utm_medium" value="'+$.urlParam("utm_medium")+'" style="display:none;">'),null!=$.urlParam("utm_campaign")&&$("form").append('<input type="text" name="utm_campaign" value="'+$.urlParam("utm_campaign")+'" style="display:none;">'),null!=$.urlParam("utm_term")&&$("form").append('<input type="text" name="utm_term" value="'+$.urlParam("utm_term")+'" style="display:none;">'),null!=$.urlParam("utm_content")&&$("form").append('<input type="text" name="utm_content" value="'+$.urlParam("utm_content")+'" style="display:none;">'),null!=$.urlParam("keyword")&&$("form").append('<input type="text" name="utm_keyword" value="'+$.urlParam("keyword")+'" style="display:none;">');var e=document.referrer;""!=e&&$("form").append('<input type="text" name="str_perehoda" value="'+e+'" style="display:none;">')}()}),$(function(){console.log("loaded!")});